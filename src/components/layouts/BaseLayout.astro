---
import "@/styles/global.css";
import Preloader from "@/components/bloques/Preloader";
import CookieBanner from "@/components/bloques/banner-cookies";

const {
  title = "La Casona Group | Catering, Banqueting & Ristorante a Bologna",
  description = "La Casona Group è catering e banqueting per eventi, matrimoni e aziende a Bologna. Trasformiamo ogni occasione in un’esperienza unica, curata in ogni dettaglio.",
  canonical = "https://lacasonagroup.it/",
  ogImage = "https://lacasonagroup.it/assets/og/la-casona-og.jpg",
  ogType = "website",
  preloadImages = [],
  preloadVideos = [],
  schema = null,
} = Astro.props;

const defaultSchema = {
  "@context": "https://schema.org",
        "@type": "Organization",
        "name": "La Casona Group",
        "url": "https://lacasonagroup.it/",
        "logo": "https://lacasonagroup.it/assets/svg/CasonaGroupLogo.svg",
        "sameAs": [
          "https://www.instagram.com/lacasonaeventi/",
          "https://www.instagram.com/lacasona_tuttifritti/",
          "https://www.facebook.com/LaCasonaTuttiFritti/",
          "https://www.facebook.com/LaCasonaEventi/"
        ],
        "description": "La Casona Group è catering e banqueting per eventi, matrimoni e aziende a Bologna. Trasformiamo ogni occasione in un’esperienza unica, curata in ogni dettaglio."
};
---

<!doctype html>
<html lang="it">
  <head>
    <!-- Charset & Responsive -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="Content-Language" content="it" />

    <!-- SEO base -->
    <title>{title}</title>
    <meta name="description" content={description} />
    <meta name="robots" content="index, follow, max-image-preview:large" />
    <link rel="canonical" href={canonical} />

    <!-- Open Graph -->
    <meta property="og:site_name" content="La Casona Group" />
    <meta property="og:locale" content="it_IT" />
    <meta property="og:type" content={ogType} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={canonical} />
    <meta property="og:image" content={ogImage} />
    <meta property="og:image:type" content="image/jpeg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="800" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />

    <!-- Favicon -->
    <link rel="icon" href="/assets/svg/fav-icon.svg" type="image/svg+xml" />

    <!-- Preload imágenes hero -->
    {preloadImages.map((imgPre) => (
      <link rel="preload" as="image" href={imgPre} />
    ))}
    <!-- Preload vídeos hero -->
    {preloadVideos.map(({ src, type }) => (
      <link
        rel="preload"
        as="fetch"
        href={src}
        type={type}
      />
    ))}


    <!-- Schema.org -->
    <script type="application/ld+json">
      {JSON.stringify(schema ?? defaultSchema)}
    </script>

    <!-- Microsoft Clarity (solo si acepta cookies) -->
    <script is:inline>
      (() => {
        if (typeof window === "undefined") return;
        if (typeof localStorage === "undefined") return;

        const consent = localStorage.getItem("cookie-consent");
        if (consent !== "accepted") return;

        (function (c, l, a, r, i, t, y) {
          c[a] =
            c[a] ||
            function () {
              (c[a].q = c[a].q || []).push(arguments);
            };
          t = l.createElement(r);
          t.async = true;
          t.src = "https://www.clarity.ms/tag/pgr1ru05y5";
          y = l.getElementsByTagName(r)[0];
          y.parentNode.insertBefore(t, y);
        })(window, document, "clarity", "script");
      })();
    </script>

    <meta name="theme-color" content="#ffffff" />
  </head>

  <body>
    <!-- Preloader: se ejecuta solo en cliente -->
    <Preloader client:load />

    <!-- Contenido de la página -->
    <slot />

    <!-- Cookie banner: solo cliente -->
    <CookieBanner client:load />

    <!-- Portal root para modales React -->
    <div id="modal-root"></div>
  </body>
</html>
